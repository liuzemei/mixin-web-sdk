!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(global,(function(){return(()=>{"use strict";var e={23:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{d(r.next(e))}catch(e){o(e)}}function a(e){try{d(r.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.withdrawal=t.removeAddress=t.addAddress=t.openTransfer=t.openSnapshot=t.checkIsPaid=t.pay=void 0;const i=n(626),o=n(737);t.pay=e=>{const{asset:t,amount:n,recipient:r}=e;if(!t||!n||!r)throw new Error("asset, amount, recipient are required");(0,i.mixinSchema)("pay",e)},t.checkIsPaid=e=>r(void 0,void 0,void 0,(function*(){return(0,i.mixinRequest)("/payments",{},"post",e)})),t.openSnapshot=e=>{if(!e.trace&&!e.snapshot_id)throw new Error("snapshot_id or trace is required");window.open(`mixin://snapshots${e.trace?(0,o.queryStringify)(e):"/"+e.snapshot_id}`),e.trace?(0,i.mixinSchema)("snapshots",e):e.snapshot_id&&(0,i.mixinSchema)(`snapshots/${e.snapshot_id}`)},t.openTransfer=e=>(0,i.mixinSchema)(`transfer/${e}`),t.addAddress=e=>{if(!e.asset||!e.destination)throw new Error("asset and destination is required");(0,i.mixinSchema)("address",e)},t.removeAddress=e=>{if(!e.address||!e.asset)throw new Error("address and asset is required");(0,i.mixinSchema)("address",Object.assign(Object.assign({},e),{action:"delete"}))},t.withdrawal=e=>{const{address:t,asset:n,amount:r}=e;if(!t||!n||!r)throw new Error("address, asset, amount are required");(0,i.mixinSchema)("withdraw",e)}},199:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.audiosPlayList=t.checkMixinVersionBiggerThanTarget=t.changeTheme=t.getTheme=t.getConversationID=t.getMixinVersion=t.getVersion=t.isImmersive=t.environment=t.getContext=void 0,t.getContext=()=>{let e;return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.MixinContext?(e=JSON.parse(prompt("MixinContext.getContext()")),e.platform=e.platform||"iOS"):window.MixinContext&&"function"==typeof window.MixinContext.getContext&&(e=JSON.parse(window.MixinContext.getContext()),e.platform=e.platform||"Android"),e},t.environment=()=>{var e;return(null===(e=(0,t.getContext)())||void 0===e?void 0:e.platform)||""},t.isImmersive=()=>{var e;return(null===(e=(0,t.getContext)())||void 0===e?void 0:e.immersive)||!1},t.getVersion=()=>{var e;return(null===(e=(0,t.getContext)())||void 0===e?void 0:e.app_version)||""};let n=/Mixin\/([0-9]+)\.([0-9]+)\.([0-9]+)/;t.getMixinVersion=()=>{const[e,t,r,i]=navigator.userAgent.match(n)||[];return t||r||i?[t,r,i].join("."):""},t.getConversationID=()=>{var e;return(null===(e=(0,t.getContext)())||void 0===e?void 0:e.conversation_id)||""},t.getTheme=()=>{const e=document.getElementsByTagName("meta");for(let t=0;t<e.length;t++)if("theme-color"===e[t].name)return e[t].content||""},t.changeTheme=e=>{const n=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("meta");for(let e=0;e<r.length;e++)if("theme-color"===r[e].name){n.removeChild(r[e]);break}const i=document.createElement("meta");i.name="theme-color",i.content=e,n.appendChild(i);const o=(0,t.environment)();"iOS"===o?window.webkit.messageHandlers.reloadTheme&&window.webkit.messageHandlers.reloadTheme.postMessage(""):"Android"===o&&window.MixinContext.reloadTheme&&window.MixinContext.reloadTheme()},t.checkMixinVersionBiggerThanTarget=e=>{const[n,r,i]=(0,t.getMixinVersion)().split(".").map(Number),[o,s,a]=e.split(".").map(Number);if(n>o)return!0;if(n===o){if(r>s)return!0;if(r===s&&i>=a)return!0}return!1},t.audiosPlayList=e=>{switch((0,t.environment)()){case"iOS":return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.playlist&&window.webkit.messageHandlers.playlist.postMessage(e);case"Android":case"Desktop":return window.MixinContext&&"function"==typeof window.MixinContext.playlist&&window.MixinContext.playlist(e)}}},255:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(620);e.exports=r.default,e.exports.Mixin=e.exports.default=e.exports},626:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{d(r.next(e))}catch(e){o(e)}}function a(e){try{d(r.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.mixinSchema=t.mixinRequest=t.request=void 0;const i=n(737),o=["https://mixin-api.zeromesh.net","https://api.mixin.one"];t.request=e=>(t,n={},s="get",a={})=>r(void 0,void 0,void 0,(function*(){const r=(0,i.queryStringify)(n),d={method:s,body:void 0,headers:new Headers({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""})};"GET"!==s.toUpperCase()&&(d.body=JSON.stringify(a));const c=yield fetch(o[0]+t+r,d),u=yield c.json();return u.data||u.error})),t.mixinRequest=(0,t.request)(),t.mixinSchema=(e,t="")=>{"object"==typeof t&&(t=(0,i.queryStringify)(t)),window.open(`mixin://${e}${t}`)}},620:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;const r=n(23),i=n(199),o=n(626),s=n(386),a=n(327),d=n(57),c=n(91);t.Mixin=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({mixinRequest:o.mixinRequest,mixinSchema:o.mixinSchema},i),s),r),a),d),c),t.default=t.Mixin},386:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharePostToFriend=t.shareLiveToFriend=t.shareAppCardToFriend=t.shareContactToFriend=t.shareImageToFriend=t.shareTextToFriend=void 0;const r=n(626),i=n(737),o=(e,t)=>(0,r.mixinSchema)("send",{category:e,data:s(t)});function s(e){return"object"==typeof e&&(e=JSON.stringify(e)),encodeURIComponent((0,i.base64encode)(e))}t.shareTextToFriend=e=>o("text",{text:e}),t.shareImageToFriend=e=>o("image",e),t.shareContactToFriend=e=>o("contact",{user_id:e}),t.shareAppCardToFriend=e=>o("app_card",e),t.shareLiveToFriend=e=>o("live",e),t.sharePostToFriend=e=>o("post",e)},327:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.readNetworkTicker=t.readExternalAddressesCheck=t.searchNetworkAsset=t.readNetworkAsset=t.readNetworkAssetsMultisig=t.readNetworkAssetsTop=t.readExternalTransactions=t.readNetworkSnapshot=t.readNetworkSnapshots=t.readNetworkChains=void 0;const r=n(626);t.readNetworkChains=()=>(0,r.mixinRequest)("/network/chains"),t.readNetworkSnapshots=e=>(0,r.mixinRequest)("/network/snapshots",e),t.readNetworkSnapshot=e=>(0,r.mixinRequest)(`/network/snapshots/${e}`),t.readExternalTransactions=e=>(0,r.mixinRequest)("/external/transactions",e),t.readNetworkAssetsTop=()=>(0,r.mixinRequest)("/network/assets/top"),t.readNetworkAssetsMultisig=()=>(0,r.mixinRequest)("/network/assets/multisig"),t.readNetworkAsset=e=>(0,r.mixinRequest)(`/network/assets/${e}`),t.searchNetworkAsset=e=>(0,r.mixinRequest)(`/network/assets/search/${e}`),t.readExternalAddressesCheck=e=>(0,r.mixinRequest)("/external/addresses/check",e),t.readNetworkTicker=(e,t)=>(0,r.mixinRequest)("/network/ticker",{asset:e,offset:t})},57:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openAppHomePage=t.openConversation=t.openUserModal=t.toAuthPage=void 0;const r=n(626),i=n(737),o={phone:"PHONE:READ",profile:"PROFILE:READ",contacts:"CONTACTS:READ",assets:"ASSETS:READ",snapshots:"SNAPSHOTS:READ",messages:"MESSAGES:REPRESENT"};t.toAuthPage=e=>{let{client_id:t,scope:n,state:r="",return_to:s="",useCDN:a}=e||{};if(!t)throw new Error("client_id is required");n||(n={profile:!0});let d=a?"https://mixin-www.zeromesh.net/oauth/authorize":"https://mixin.one/oauth/authorize",c=Object.keys(n).map((e=>o[e])).join("+");location.href=d+(0,i.queryStringify)({client_id:t,scope:c,state:r,return_to:s})},t.openUserModal=e=>(0,r.mixinSchema)(`users/${e}`),t.openConversation=(e,t)=>(0,r.mixinSchema)(`conversations/${e}`,{user:t}),t.openAppHomePage=(e,t,n="open")=>(0,r.mixinSchema)(`apps/${e}`,Object.assign({action:n},t))},91:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{d(r.next(e))}catch(e){o(e)}}function a(e){try{d(r.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.readConversation=t.readSnapshot=t.readSnapshots=t.readBlockingUser=t.readFriends=t.readAsset=t.readAssets=void 0;const i=n(626);t.readAssets=e=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)("/assets")})),t.readAsset=(e,t)=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)(`/assets/${t}`)})),t.readFriends=e=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)("/friends")})),t.readBlockingUser=e=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)("/blocking_users")})),t.readSnapshots=e=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)("/snapshots")})),t.readSnapshot=(e,t)=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)(`/snapshots/${t}`)})),t.readConversation=(e,t)=>r(void 0,void 0,void 0,(function*(){return(0,i.request)(e)(`/conversations/${t}`)}))},737:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryStringify=t.base64encode=void 0;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.base64encode=e=>{var t,r,i,o,s,a;for(e=function(e){var t,n,r,i;for(t="",r=e.length,n=0;n<r;n++)(i=e.charCodeAt(n))>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t}(e),i=e.length,r=0,t="";r<i;){if(o=255&e.charCodeAt(r++),r==i){t+=n.charAt(o>>2),t+=n.charAt((3&o)<<4),t+="==";break}if(s=e.charCodeAt(r++),r==i){t+=n.charAt(o>>2),t+=n.charAt((3&o)<<4|(240&s)>>4),t+=n.charAt((15&s)<<2),t+="=";break}a=e.charCodeAt(r++),t+=n.charAt(o>>2),t+=n.charAt((3&o)<<4|(240&s)>>4),t+=n.charAt((15&s)<<2|(192&a)>>6),t+=n.charAt(63&a)}return t},t.queryStringify=e=>"?"+Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}},t={};return function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(255)})()}));